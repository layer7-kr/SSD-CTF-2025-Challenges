import requests as req
import hashlib

url = 'http://localhost:3000'


res = req.post(f'{url}/api/auth/register', json={
    'username': 'guest',
    'password': 'guest',
})
user_id = res.json().get('user_id')

res = req.post(f'{url}/api/auth/login', json={
    'user_id': '2',
    'password': 'guest'
})
token = res.json().get('token')
headers = {
    "authorization": f"Bearer {token}"
}

res = req.put(f'{url}/api/hdd/update', json={
    "data_id": "0", "newData": "0"
}, headers=headers)

res = req.put(f'{url}/api/hdd/change-owner', json={
    "new_user_id": ".", "data_id": "0"
}, headers=headers)

res = req.post(f'{url}/api/auth/register', json={
    'username': 'guest',
    'password': 'guest',
})

res = req.post(f'{url}/api/auth/login', json={
    'user_id': '1',
    'password': 'guest',
})
token = res.json().get('token')
headers = {
    "authorization": f"Bearer {token}"
}

res = req.get(f'{url}/api/hdd/read/1/2', headers=headers)
print(res.text)